@import controllers.admin.{routes => adminroutes}
@import model.{Computer, ComputerState, Laboratory, Room}
@import model.ConnectedUser
@(laboratory: Laboratory, roomsWithComputers: Map[Option[Room], Seq[(Computer, Option[(ComputerState, Seq[ConnectedUser])])]])(implicit messages: Messages, isAdmin: Boolean)
<h1>@messages("laboratory").capitalize @laboratory.name</h1>
@if(roomsWithComputers.nonEmpty) {
    @for((room, computers) <- roomsWithComputers if room.isDefined) {
        @roomPanel(room.get, computers)
    }
    @if(isAdmin) {
        <div class="btn-agregar-tabla">
            <a href="@adminroutes.RoomController.add()" class="btn btn-default " role="button">
            @messages("room.add")</a>
            <a href="@adminroutes.ComputerController.add" class="btn btn-default " role="button">
            @messages("computer.add")</a>
        </div>
            <div id="commandbox" class="modal fade" role="dialog">
                <div class="modal-dialog">
                        <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title">@messages("computer.executeCommandTitle")</h4>
                        </div>
                        <div class="modal-body">
                            <p>@messages("computer.executeCommandBody")</p>
                            <a id="shutdown" class="btn btn-danger" href="" onclick="return confirm(@messages("computer.shutdown.confirm"))">@messages("computer.shutdown")</a>
                            <a id="upgrade" class="btn btn-info" href="" onclick="return confirm(@messages("computer.upgrade.confirm"))">@messages("computer.upgrade")</a>
                            <a id="unfreeze" class="btn btn-info" href="" onclick="return confirm(@messages("computer.unfreeze.confirm"))">@messages("computer.unfreeze")</a>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">@messages("close")</button>
                        </div>
                    </div>

                </div>
            </div>

    }

} else {
    <div class="panel panel-warning">
        <div class="panel-heading">@messages("empty")</div>
        <div class="panel-body">
            <div id="no-encontrado">
                <i class="flaticon-boxes27"></i>
                <h1>@messages("laboratory.empty.title")</h1>
                <p>@messages("laboratory.empty.text")</p>
                @if(isAdmin) {
                    <div class="btn-agregar-tabla">
                        <a href="@adminroutes.RoomController.add()" class="btn btn-default " role="button">@messages("laboratory.addRoom")</a>
                    </div>
                } else {
                    <p>@messages("contactAdmin")</p>
                }
            </div>

        </div>
    </div>
}

